

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Changelog &mdash; Merlin  documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Installing" href="install.html" />
    <link rel="prev" title="NOTE: UNDER CONSTRUCTION" href="index.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> Merlin
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption" role="heading"><span class="caption-text">About</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="index.html">NOTE: UNDER CONSTRUCTION</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Changelog</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#unreleased">[Unreleased]</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id1">[2021.11.1] - 2021-11-01</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#added">Added</a></li>
<li class="toctree-l3"><a class="reference internal" href="#changed">Changed</a></li>
<li class="toctree-l3"><a class="reference internal" href="#removed">Removed</a></li>
<li class="toctree-l3"><a class="reference internal" href="#fixed">Fixed</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id2">[2021.10.2] - 2021-10-13</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id3">Fixed</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id4">[2021.10.1] - 2021-10-01</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id5">Added</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id6">Changed</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id7">Removed</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id8">Fixed</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id9">[2021.9.1] - 2021-09-03</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id10">Removed</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id11">[2021.8.1] - 2021-07-30</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id12">Added</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id13">Changed</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id14">Fixed</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id15">[2021.4.1] - 2021-04-01</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id16">Added</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id17">Changed</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id18">[2021.2.1] - 2021-01-29</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id19">Changed</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Using merlin</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="install.html">Installing</a></li>
<li class="toctree-l1"><a class="reference internal" href="clustering.html">Clustering</a></li>
<li class="toctree-l1"><a class="reference internal" href="configuration.html">Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="encryption.html">Encrypted communication</a></li>
<li class="toctree-l1"><a class="reference internal" href="container-poller.html">Merlin container poller</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Merlin</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Changelog</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/changelog.md.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="tex2jax_ignore mathjax_ignore section" id="changelog">
<h1>Changelog<a class="headerlink" href="#changelog" title="Permalink to this headline">¶</a></h1>
<p>All notable changes to this project will be documented in this file. Changes to
vendor specific packaging are excluded.</p>
<p>The format is based on <a class="reference external" href="https://keepachangelog.com/en/1.0.0/">Keep a Changelog</a>,
and this project adheres to <a class="reference external" href="https://calver.org/">Calendar Versioning</a>, with the
format YYYY.MM.MICRO. The tag may occasionally be made just prior to the change
of month.</p>
<div class="section" id="unreleased">
<h2>[Unreleased]<a class="headerlink" href="#unreleased" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="id1">
<h2>[2021.11.1] - 2021-11-01<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h2>
<div class="section" id="added">
<h3>Added<a class="headerlink" href="#added" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Added <code class="docutils literal notranslate"><span class="pre">mon</span> <span class="pre">containerhealth</span></code> that can be used to perform healthchecks when
Merlin and Naemon is running in a container. This mon command is only shipped
with the <code class="docutils literal notranslate"><span class="pre">-slim</span></code> packages.</p></li>
</ul>
</div>
<div class="section" id="changed">
<h3>Changed<a class="headerlink" href="#changed" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">mon</span> <span class="pre">restart</span></code> now checks if we are running on an systemd system. If not, a
a SIGHUP is sent to Naemon process for reloading.</p></li>
</ul>
</div>
<div class="section" id="removed">
<h3>Removed<a class="headerlink" href="#removed" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>showlog no longer support the <code class="docutils literal notranslate"><span class="pre">--cgi-cfg=</span></code> argument.</p></li>
</ul>
</div>
<div class="section" id="fixed">
<h3>Fixed<a class="headerlink" href="#fixed" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>OBS Build now correctly <code class="docutils literal notranslate"><span class="pre">Requires:</span> <span class="pre">python2-PyMySQL</span></code> instead of <code class="docutils literal notranslate"><span class="pre">BuildRequires</span></code>
on EL8. This fixes a couple of mon scripts for example
<code class="docutils literal notranslate"><span class="pre">mon</span> <span class="pre">status</span> <span class="pre">install-time</span></code></p></li>
<li><p>Require <code class="docutils literal notranslate"><span class="pre">php-cli</span></code> for <code class="docutils literal notranslate"><span class="pre">-apps</span></code> packages ensuring <code class="docutils literal notranslate"><span class="pre">mon</span> <span class="pre">node</span> <span class="pre">tree</span></code> works
correctly</p></li>
<li><p>mon sshkey tools are now correctly using the user set during configure.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">mon</span> <span class="pre">log</span></code> now correctly works with the OBS built package.</p></li>
<li><p>spec: fixed misspelled dependency on python3-cryptography for EL8 slim packages</p></li>
<li><p>showlog now fallsbacks to using either <code class="docutils literal notranslate"><span class="pre">/opt/monitor/etc/naemon.cfg</span></code> or
<code class="docutils literal notranslate"><span class="pre">/etc/naemon/naemon.cfg</span></code> for detecting the naemon.cfg file if no argument is
provided. This ensures <code class="docutils literal notranslate"><span class="pre">mon</span> <span class="pre">showlog</span></code> works correctly most systems.</p></li>
<li><p>Sync slim pollers encryption keys to any peers, prior to restart, when
executing <code class="docutils literal notranslate"><span class="pre">mon</span> <span class="pre">slim-poller</span> <span class="pre">register</span></code>.</p></li>
</ul>
</div>
</div>
<div class="section" id="id2">
<h2>[2021.10.2] - 2021-10-13<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id3">
<h3>Fixed<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Fixed an issue introduced in 2021.10.1 where <code class="docutils literal notranslate"><span class="pre">mon</span> <span class="pre">oconf</span> <span class="pre">push</span></code> would fail to
work when pushing to pollers on systems with non upstream naemon paths.</p></li>
</ul>
</div>
</div>
<div class="section" id="id4">
<h2>[2021.10.1] - 2021-10-01<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id5">
<h3>Added<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Community packages for CentOS/RHEL 7 &amp; 8 are now generated with Open Suse
Build Service</p></li>
<li><p>Changelog has been added!</p></li>
<li><p>Configure option <code class="docutils literal notranslate"><span class="pre">--with-ls-socket</span></code> allows one to configure where the
livestatus socket is expected to be for the apps.</p></li>
<li><p>For slim packages, the <code class="docutils literal notranslate"><span class="pre">merlin_cluster_tools</span></code> script has been added. This
script can be used with the <code class="docutils literal notranslate"><span class="pre">cluster_update</span></code> setting to automatically handle
clustering.</p></li>
</ul>
</div>
<div class="section" id="id6">
<h3>Changed<a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Paths in the <code class="docutils literal notranslate"><span class="pre">mon</span></code> apps has been adjusted to configurable values. They are
either fetched directly from the Naemon config, or from values set when
running <code class="docutils literal notranslate"><span class="pre">configure</span></code>. This should make the <code class="docutils literal notranslate"><span class="pre">mon</span></code> apps less OP5 specific and
work correctly with community installs.</p></li>
<li><p>The user/group in the systemd and logrotate files has been adjusted to match
the values set with <code class="docutils literal notranslate"><span class="pre">configure</span></code>.</p></li>
</ul>
</div>
<div class="section" id="id7">
<h3>Removed<a class="headerlink" href="#id7" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">mon</span> <span class="pre">log</span> <span class="pre">fetch</span></code> and <code class="docutils literal notranslate"><span class="pre">mon</span> <span class="pre">log</span> <span class="pre">sortmerge</span></code> has been removed, as these are broken
and no longer used.</p></li>
</ul>
</div>
<div class="section" id="id8">
<h3>Fixed<a class="headerlink" href="#id8" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Correctly tokenize <code class="docutils literal notranslate"><span class="pre">ipc_blocked_hostgroups</span></code> so that the setting works as it
should with multiple hostgroups defined.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">mon</span> <span class="pre">db</span> <span class="pre">fixindexes</span></code> had an outdated OP5 specific paths to SQL files. The path
has been correctly to work on both OP5 and community packages using the
configure option <code class="docutils literal notranslate"><span class="pre">--datarootdir</span></code>.</p></li>
</ul>
</div>
</div>
<div class="section" id="id9">
<h2>[2021.9.1] - 2021-09-03<a class="headerlink" href="#id9" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id10">
<h3>Removed<a class="headerlink" href="#id10" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Sample cronjobs in /apps</p></li>
</ul>
</div>
</div>
<div class="section" id="id11">
<h2>[2021.8.1] - 2021-07-30<a class="headerlink" href="#id11" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id12">
<h3>Added<a class="headerlink" href="#id12" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">--write</span></code> option to <code class="docutils literal notranslate"><span class="pre">mon</span> <span class="pre">merlinkey</span> <span class="pre">generate</span></code> which will write the path to the
newly generated private encryption key to merlin.conf</p></li>
<li><p>New mon commands: slimpoller. These are inteded for slim pollers to register
or deregister with a master node.</p></li>
<li><p>Implemented <code class="docutils literal notranslate"><span class="pre">ipc_blocked_hostgroups</span></code> setting. This setting will allow to block
the specific node from executing checks from the specified hostgroups</p></li>
</ul>
</div>
<div class="section" id="id13">
<h3>Changed<a class="headerlink" href="#id13" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Exceptions added to the <code class="docutils literal notranslate"><span class="pre">auto_delete</span></code> functionality to avoid master takeover
of checks. Don’t auto delete in pollergroups with only one node, and when
no nodes have been heard from recently.</p></li>
<li><p>Only enable <code class="docutils literal notranslate"><span class="pre">auto_delete</span></code> for pollers.</p></li>
<li><p>Make <code class="docutils literal notranslate"><span class="pre">mon</span> <span class="pre">merlinkey</span> <span class="pre">generate</span></code> idempotent.</p></li>
</ul>
</div>
<div class="section" id="id14">
<h3>Fixed<a class="headerlink" href="#id14" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Fix an issue that caused <code class="docutils literal notranslate"><span class="pre">auto_delete</span></code> nodes to be removed prematurely.</p></li>
<li><p>Show the correct time to node auto deletion in the debug log.</p></li>
<li><p>Correctly set the required Naemon version in the build tools.</p></li>
</ul>
</div>
</div>
<div class="section" id="id15">
<h2>[2021.4.1] - 2021-04-01<a class="headerlink" href="#id15" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id16">
<h3>Added<a class="headerlink" href="#id16" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">mon</span> <span class="pre">oconf</span> <span class="pre">fetch</span></code> now support file sync via the –sync command. Ported to
python</p></li>
<li><p>Support for SSH-less “test this check” using a new query handler <code class="docutils literal notranslate"><span class="pre">runcmd</span></code></p></li>
<li><p>Node identification is now possible using UUID, by using the new merlin.conf
options <code class="docutils literal notranslate"><span class="pre">ipc_uuid</span></code> and <code class="docutils literal notranslate"><span class="pre">uuid</span></code>.</p></li>
<li><p>Allow setting <code class="docutils literal notranslate"><span class="pre">publickey</span></code> with <code class="docutils literal notranslate"><span class="pre">mon</span> <span class="pre">node</span> <span class="pre">add</span></code></p></li>
<li><p>New setting <code class="docutils literal notranslate"><span class="pre">cluster_update</span></code> allows an arbitary script to be run when a remote
node signals the cluster config is invalid. The script chosen should be able
adjust the cluster config into a valid state.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">mon</span> <span class="pre">oconf</span> <span class="pre">remote-fetch</span></code> added, which will tell a remote node to execute
<code class="docutils literal notranslate"><span class="pre">mon</span> <span class="pre">oconf</span> <span class="pre">fetch</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">auto_delete</span></code> functionality allows removing nodes which have not been seen
withing x seconds.</p></li>
</ul>
</div>
<div class="section" id="id17">
<h3>Changed<a class="headerlink" href="#id17" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Add support for Naemon 1.2.4. Merlin now requires Naemon version &gt;= 1.2.4.</p></li>
</ul>
</div>
</div>
<div class="section" id="id18">
<h2>[2021.2.1] - 2021-01-29<a class="headerlink" href="#id18" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id19">
<h3>Changed<a class="headerlink" href="#id19" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Binlogs are now stored persistently to file when merlin shuts down. The
binlog is loaded again on startup ensuring no events are lost if merlin is
restarted while another node is down. Can be disabled by setting
<code class="docutils literal notranslate"><span class="pre">binlog_persist</span> <span class="pre">=</span> <span class="pre">0</span></code>.</p></li>
</ul>
<p>Changelogs for earlier versions are not kept, please see git log for details.</p>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="install.html" class="btn btn-neutral float-right" title="Installing" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="index.html" class="btn btn-neutral float-left" title="NOTE: UNDER CONSTRUCTION" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2021, ITRS Group

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>